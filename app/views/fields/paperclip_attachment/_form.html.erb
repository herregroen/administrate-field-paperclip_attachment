<%#
# Paperclip Image Form Partial
This partial renders an input element for an paperclip attachment - image
and if present the image of the current value.
By default, the input is a file input.
## Local variables:
- `f`:
  A Rails form generator, used to help create the appropriate input fields.
- `field`:
  An instance of Administrate::Field::PaperclipImage.
  A wrapper around a paperclip attachment pulled from the database.
%>

<div class="field-unit__label">
  <%= f.label field.attribute %>
</div>
<div class="field-unit__field">
  <% if field.data.present? %>
    <% if field.is_image %>
      <% if field.cropper %>
        <span class="cropper-help"><%= t('administrate.field.paperclip_attachment.cropper_help') %></span>
        <%= image_tag field.url_for(:form), data: { :'aspect-ratio' => field.aspect_ratio, :'has-cropper' => true } %>
        <%= file_field nil, nil, accept: field.accept_types.join(','), class: 'paperclip-image-upload' %>
        <%= f.hidden_field field.attribute, value: nil %>
      <% else %>
        <%= image_tag field.url_for(:form) %>
        <%= f.file_field field.attribute, accept: field.accept_types.join(','), class: 'paperclip-image-upload' %>
      <% end %>
    <% else %>
      <%= link_to field.data.original_filename, field.url_for(:form) %>
      <%= f.file_field field.attribute, accept: field.accept_types.join(',') %>
    <% end %>
  <% end %>

</div>
